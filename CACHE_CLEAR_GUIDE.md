# Vercel KV ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã‚¬ã‚¤ãƒ‰

## Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å‰Šé™¤ã™ã‚‹æ–¹æ³•

### ã‚¹ãƒ†ãƒƒãƒ—1: Vercel Storage ã«ã‚¢ã‚¯ã‚»ã‚¹

1. [Vercel Dashboard](https://vercel.com/dashboard) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œsougi_finderã€ã‚’é¸æŠ
3. ä¸Šéƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® **ã€ŒStorageã€** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—2: KV ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é–‹ã

1. Storage ä¸€è¦§ã‹ã‚‰ **ã€Œeasy-mammoth-21343ã€** ã‚’é¸æŠ
2. **ã€ŒDataã€** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚­ãƒ¼ã‚’å‰Šé™¤

**å€‹åˆ¥å‰Šé™¤ã®å ´åˆ:**
- `description:` ã§å§‹ã¾ã‚‹ã‚­ãƒ¼ã‚’æ¢ã™
- å„ã‚­ãƒ¼ã®å³å´ã«ã‚ã‚‹ã€ŒDeleteã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

**ä¸€æ‹¬å‰Šé™¤ã®å ´åˆ:**
- æ®‹å¿µãªãŒã‚‰ã€Vercel ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã¯ä¸€æ‹¬å‰Šé™¤æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã›ã‚“
- ä»¥ä¸‹ã®æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

---

## æ¨å¥¨: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ä¸€æ‹¬å‰Šé™¤

ã™ã§ã«ä½œæˆæ¸ˆã¿ã® `scripts/clear-cache.ts` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### å®Ÿè¡Œæ–¹æ³•

```bash
# .env.local ã«ç’°å¢ƒå¤‰æ•°ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
cat .env.local | grep KV_

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œï¼‰
npx tsx scripts/clear-cache.ts &

# ãƒ—ãƒ­ã‚»ã‚¹IDãŒè¡¨ç¤ºã•ã‚Œã¾ã™
# ä¾‹: [1] 12345

# é€²è¡ŒçŠ¶æ³ã‚’ç¢ºèªã—ãŸã„å ´åˆ
tail -f /tmp/cache-clear.log
```

### å®Ÿè¡Œæ™‚é–“ã®ç›®å®‰

- **3000ã‚­ãƒ¼**: ç´„5-10åˆ†
- **5000ã‚­ãƒ¼**: ç´„10-15åˆ†

é€²è¡ŒçŠ¶æ³ã¯10ä»¶ã”ã¨ã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
```
ğŸ“¦ Found 100 keys (Total: 100)
ğŸ“¦ Found 100 keys (Total: 200)
...
ğŸ—‘ï¸  Deleting keys...
   Deleted 10/3000 keys...
   Deleted 20/3000 keys...
```

---

## é«˜é€ŸåŒ–ã‚ªãƒ—ã‚·ãƒ§ãƒ³: ãƒãƒƒãƒå‰Šé™¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ã‚‚ã—æ™‚é–“ãŒã‹ã‹ã‚Šã™ãã‚‹å ´åˆã¯ã€æ”¹å–„ç‰ˆã‚’ä½œæˆã§ãã¾ã™ï¼š

```bash
# æ”¹å–„ç‰ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œï¼ˆã‚ˆã‚Šé«˜é€Ÿï¼‰
npx tsx scripts/clear-cache-batch.ts
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯è¤‡æ•°ã®ã‚­ãƒ¼ã‚’ä¸€åº¦ã«å‰Šé™¤ã™ã‚‹ãŸã‚ã€ã‚ˆã‚Šé«˜é€Ÿã§ã™ã€‚

---

## æ³¨æ„äº‹é …

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢å¾Œã®å‹•ä½œ

- æ¬¡å›ã®APIå‘¼ã³å‡ºã—æ™‚ã«ã€æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§èª¬æ˜æ–‡ãŒå†ç”Ÿæˆã•ã‚Œã¾ã™
- ç”Ÿæˆã«ã¯1ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ãŸã‚Š2-5ç§’ã‹ã‹ã‚Šã¾ã™
- ç”Ÿæˆã•ã‚ŒãŸèª¬æ˜æ–‡ã¯æ°¸ç¶šçš„ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™

### ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã®é–¢ä¿‚

- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã¯**ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã¯ç‹¬ç«‹**ã—ã¦ã„ã¾ã™
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å¤‰æ›´ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã‚‚ã€æ—¢å­˜ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯æ®‹ã‚Šã¾ã™
- æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’åæ˜ ã•ã›ã‚‹ã«ã¯ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢ãŒå¿…è¦ã§ã™

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å ´åˆ

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’å†å–å¾—
vercel env pull .env.local --yes

# å†åº¦å®Ÿè¡Œ
npx tsx scripts/clear-cache.ts
```

### é€²è¡ŒãŒé…ã„å ´åˆ

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã€ä»–ã®ä½œæ¥­ã‚’ç¶šã‘ã‚‰ã‚Œã¾ã™ï¼š

```bash
# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œ
npx tsx scripts/clear-cache.ts > /tmp/cache-clear.log 2>&1 &

# åˆ¥ã®ä½œæ¥­ã‚’ç¶šã‘ã‚‹...

# é€²è¡Œç¢ºèª
tail -f /tmp/cache-clear.log

# å®Œäº†ç¢ºèª
grep "Successfully deleted" /tmp/cache-clear.log
```
